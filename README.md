# 微服务分层架构Kata

宇宙消费金融公司是一家旨在永续提升全人类生活水平的信贷服务公司，为了更好服务全人类，特聘请你开发个人消费金融开放平台，提供开放API服务。任何第三方都可以通过此平台服务全人类，这是一个伟大的梦想，有赖你来实现！

主要的业务包括：用户先签订合同，确定借款额度。然后宇宙公司放款，生成还款计划。最后定期从用户的还款银行卡扣款。

API文档： https://app.swaggerhub.com/apis-docs/meixuesong/Contract/1.0.0#/

## 合同

用户在借款之前要签订合同。合同的主要信息包括客户信息、合同期限、最大借款额度等。

有以下规则：年龄应该达到18岁，年利率不得超过36%，期限不得超过2年。最大额度与年龄的关系如下：
[18-20]: 1万；(20-30]:5万；(30-50]:20万；(50-60]:3万；(60-70]:1万；(70-]:0元；

## 放款
钱对宇宙公司来说从来不是问题，因此只要客户提款都会自动放款。放款成功后，自动生成借据和还款计划。目前只支持等额本金还款方式。有以下规则：放款总额不能超过合同总额度；合同过期不能放款；银行支付接口失败时，本次操作失败，需要重新发起放款。


## 还款
根据还款计划ID扣款或者批量还款，扣款成功时，要修改还款计划的状态。规则如下：
如果余额不足则失败。银行执行扣款时，可能发生接口异常，卡状态异常等原因导致扣款失败。
